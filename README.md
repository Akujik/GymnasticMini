# 百适体操馆小程序运营管理系统

基于 Speckit 工具链规范开发的微信小程序 + Web后台 + 后端服务完整解决方案。

## 📋 项目概述

百适体操馆小程序是一个面向体操培训机构的综合性管理平台，支持用户智能匹配预约、微信支付、钱包管理、候补通知、运营后台等核心功能。项目采用分阶段MVP开发策略，通过8个阶段逐步构建完整的业务体系。

### 🎯 核心特性

- 🎯 **智能匹配**: 基于标签体系的100%完全匹配算法
- 💰 **灵活支付**: 微信支付 + 钱包透支系统
- 📱 **微信小程序**: 面向家长和学员的主要用户界面
- 🖥️ **运营后台**: 完整的Web管理和数据统计功能
- 📅 **候补管理**: 智能候补队列和自动通知系统

### 技术栈 (RuoYi 架构)

| 层级 | 技术 | 版本 | 说明 |
|------|------|------|------|
| **小程序** | 微信原生框架 | 基础库 3.11.0+ | 主要用户界面，支持Skyline渲染 |
| **管理后台** | RuoYi-Vue-Pro | 最新 | 企业级管理后台，代码生成器+RBAC |
| **后端框架** | Spring Boot | 3.1.x | 企业级Java框架，生态成熟 |
| **安全框架** | Spring Security + JWT | 6.x | 完善的安全认证和权限管理 |
| **数据库** | MySQL | 8.0+ | 关系型数据库，ACID事务支持 |
| **缓存** | Redis | 7.0+ | 高性能缓存，Spring Session支持 |
| **ORM** | MyBatis-Plus | 3.5.x | 强大的ORM框架，代码生成支持 |
| **支付** | 微信支付Java SDK | 最新 | 官方Java版本支付SDK |
| **部署** | Docker + Spring Boot | 3.x | 容器化部署，Spring Boot内置支持 |
| **工具链** | Speckit | - | 开发工具和规范 |

## 🗺️ 项目导航

### 📄 核心文档
- [**8阶段开发路线图**](ROADMAP.md) - 分阶段实施计划
- [**项目宪法**](CONSTITUTION.md) - 18项开发原则，项目宪法
- [**开发指南**](DEVELOPMENT.md) - Spring Boot开发规范和实践
- [**技术文档**](docs/technical/) - RuoYi架构、数据库设计、API规范
- [**MVP完整文档**](docs/mvp-complete/) - 8个MVP详细规格说明

### 📁 项目结构
```
GymnasticMini/
├── 📄 README.md                    # 项目主入口 (本文件)
├── 📄 CONSTITUTION.md               # 项目宪法 - 18项开发原则
├── 📄 DEVELOPMENT.md               # 开发指南 - Spring Boot实践
├── 📄 ROADMAP.md                   # 8阶段开发路线图
├── 📁 .specify/                    # Speckit工具链配置
│   ├── templates/                  # 文档模板
│   ├── scripts/                    # 自动化脚本
│   └── checklists/                 # 质量检查清单
├── 📁 docs/                        # 项目文档
│   ├── technical/                  # 技术文档
│   │   ├── ruoyi-technical-architecture.md  # RuoYi架构设计
│   │   ├── database-design.md      # MyBatis-Plus数据库设计
│   │   ├── deployment-guide.md     # Docker部署指南
│   │   └── api-design-guide.md     # API设计规范
│   ├── mvp-complete/               # MVP完整文档
│   │   ├── 001-user-identity-system.md      # 用户身份系统
│   │   ├── 002-course-display-and-booking.md # 课程展示与预约
│   │   ├── 003-waitlist-and-makeup.md       # 候补与补课系统
│   │   ├── 004-private-lesson.md            # 私教课系统
│   │   ├── 005-payment-integration.md       # 支付集成
│   │   ├── 006-wallet-system.md             # 钱包系统
│   │   ├── 007-admin-dashboard.md           # 运营后台
│   │   └── 008-tag-system.md                # 标签系统
│   └── requirements.md             # 需求整合文档
├── 📁 specs/                       # 详细规格文档 (备用)
└── 📁 .git/                        # Git仓库
```

## 🚀 修正后的8阶段开发路线图

### 阶段概览 (总计20周)

| 阶段 | 周期 | 主要内容 | 优先级 | 状态 |
|------|------|----------|--------|------|
| **P0** | 2周 | 用户身份系统 (MVP-1) | P0 | ✅ 规格完成 |
| **P1** | 4周 | 课程展示+钱包系统 (MVP-2A+MVP-6) | P1 | ✅ 规格完成 |
| **P2** | 3周 | 支付集成 (MVP-5) | P1 | ✅ 规格完成 |
| **P3** | 4周 | 候补+私教课 (MVP-3+MVP-4) | P2 | ✅ 规格完成 |
| **P4** | 2周 | 运营管理后台 (MVP-7) | P2 | ✅ 规格完成 |
| **P5** | 2周 | 系统集成测试和优化 | P3 | 📋 规划中 |
| **P6** | 2周 | 性能优化和安全加固 | P3 | 📋 规划中 |
| **P7** | 1周 | 用户验收测试和培训 | P3 | 📋 规划中 |
| **P8** | 1周 | 正式上线和运维 | P3 | 📋 规划中 |

### 关键修正
- **优先级重排**: 钱包系统提前，确保预约时余额检查
- **依赖明确**: 钱包余额→预约资格→支付处理的完整数据流
- **规则标准化**: 候补6.5小时规则+时间冲突场景处理
- **技术栈统一**: 专注Node.js + Express，避免复杂化

> 详细规划请查看 [**ROADMAP.md v2.1**](ROADMAP.md)

## 🔧 核心业务规则

### 智能匹配算法
- **100%完全匹配**: 不使用权重计算，只有匹配(100%)和不匹配(0%)
- **L3以下**: 等级匹配 + 年龄匹配
- **L3及以上**: 等级匹配 + 性别匹配
- **体验课**: 仅年龄匹配 + OpenID限制

### 支付和钱包规则
- **体验课**: 固定200元，原路退费
- **正式课**: 预约时立即扣费，取消时退回钱包
- **透支支持**: 钱包允许负余额，欠费时限制新预约
- **余额预警**: <200元时推送通知

### 候补和请假规则
- **候补截止**: 开课前6.5小时，提供30分钟确认窗口
- **请假限制**: 开课前6小时内禁止请假
- **次数限制**: 不设置月度限制，连续请假4次触发运营通知

## 🛠️ Speckit 工具链

### 开发流程
每个阶段遵循标准开发流程：
```
Specify → Plan → Tasks → Implement → Test → Deploy
```

### 可用命令
- `/speckit.specify` - 创建功能规格
- `/speckit.plan` - 制定技术计划
- `/speckit.tasks` - 分解开发任务
- `/speckit.checklist` - 生成质量检查清单
- `/speckit.analyze` - 跨文档一致性分析
- `/speckit.clarify` - 澄清需求和问题

## 📊 项目状态

### 当前进度
- ✅ **需求文档整理** - 完成
- ✅ **规格文档制定** - 8个MVP全部完成
- ✅ **8阶段路线图** - 制定完成
- ✅ **架构迁移** - 迁移至RuoYi架构完成
- ✅ **文档结构重组** - 完成，消除40%冗余
- 🔄 **开发环境准备** - 进行中
- ⏳ **P0阶段实施** - 待开始

### 核心里程碑
- [ ] P0: 用户身份系统完成 (2周)
- [ ] P1: 核心业务闭环完成 (4周)
- [ ] P2: 财务管理系统完成 (3周)
- [ ] P3: 扩展功能完成 (4周)
- [ ] P4-P7: 系统完善和上线 (6周)

## 📞 项目信息

**最后更新**: 2025-11-18
**文档版本**: v3.0 (RuoYi架构)
**宪法版本**: v3.0.0
**项目状态**: 架构迁移完成，文档整理完毕，准备开发实施

---

> 📌 **开始开发**: 请查看 [ROADMAP.md](ROADMAP.md) 了解详细的8阶段实施计划，然后从P0阶段的MVP-1用户身份系统开始。